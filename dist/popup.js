(()=>{"use strict";document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("keywords"),o=document.getElementById("save"),t=document.getElementById("toggle"),n=document.getElementById("loader");function s(e){chrome.tabs.query({active:!0,currentWindow:!0},(o=>{var t;(null===(t=o[0])||void 0===t?void 0:t.id)?chrome.tabs.sendMessage(o[0].id,e).catch((e=>{console.log("Error sending message:",e)})):console.log("No active tab found")}))}function d(){n.classList.remove("hidden")}function c(){n.classList.add("hidden")}chrome.storage.sync.get(["keywords","isEnabled"],(o=>{o.keywords&&(e.value=o.keywords.join("\n")),t.checked=o.isEnabled||!1})),t.addEventListener("change",(()=>{const e=t.checked;d(),chrome.storage.sync.set({isEnabled:e},(()=>{console.log("Extension toggled:",e),s({action:"toggleExtension",isEnabled:e}),setTimeout(c,500)}))})),o.addEventListener("click",(()=>{const o=e.value.split("\n").filter((e=>""!==e.trim()));d(),chrome.storage.sync.set({keywords:o},(()=>{console.log("Keywords saved"),chrome.storage.sync.get(["isEnabled"],(e=>{s({action:"updateKeywords",keywords:o,isEnabled:e.isEnabled}),setTimeout(c,500)}))}))}))}))})();